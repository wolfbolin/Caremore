# 可穿戴设备说明

＠Caremore

## 核心功能

​	儿童可穿戴设备主要用于收集儿童身边发生的事件所产生的物理信息，其中包括声音、心率与位置信息。当设备感受到声音后会自动记录并分析声音中包含的内容，当设备捕获到关键的信息后，将会把最新的心率与位置信息连同音频信息打包发送至云端服务器，将数据交给服务器进行更加准确的分析。

## 配套功能

* 紧急状态模式
  * 当设备进入紧急模式时，设备会连续不间断的定位并录音，并将这些信息实时上传至云中保存，同时试图建立电话通信。（该模式仅可通过手动的方式启动，软件不会自动开启该模式）
  * 若可穿戴设备主动进入紧急模式，设备将采取直接呼叫预定义电话号码的方式建立通话。
  * 若手机APP端主动进入紧急模式，可穿戴设备将自动接听预定义电话号码呼入的电话。


* 日常巡航模式
  * 在日常巡航模式中，设备将只保持监测而不上传实时信息，以节约电量，避免信息爆炸。
  * 若电话呼入可穿戴设备，设备会根据来电号码自动接听或挂断电话，以保证家长对孩子周围情况的了解。

## 细节功能

* 电量指示灯
* 网络信号指示灯
* GPS信号指示灯
* SOS报警信号灯
* 腕带
* 系统自检


## 技术实现

可穿戴设备主要由“Raspberry 3B”(树莓派)、"Arduino Uno”(ARM驱动板)、"SIM800H GPRS"(通信模块)、"V.KEL GPS"(GPS模块)、"Heart rate sensor"(心率传感器)五个模块组成，在此基础上我们制作了集成开发板，该开发板可使五大模块快速拼接在一起，并且开发板上集成了供电模组、声卡模组和控制器信号灯模组。我们自行制作的集成开发板使得成个设备紧密连接在一起，避免不合理的走线对硬件造成的负面影响，加快项目开发的进度。

我们为不同的信号源建立了不同的信号输入通道，"Heart rate sensor"(心率传感器)采取数字信号传输方式将收集到的心率信息传入"Arduino Uno”(ARM驱动板)，而"V.KEL GPS"(GPS模块)则通过软串口传输方式将地理信息传入"Arduino Uno”(ARM驱动板)。"Arduino Uno”(ARM驱动板)将两种信号混合后，通过内置的CH340模组将数据发送至树莓派。 另一方面，"SIM800H GPRS"(通信模块)直接通过串口通信方式与“Raspberry 3B”(树莓派)进行双向通信，同时通过特殊的接口与声卡模块对接，该芯片为用户通话和数据传输提供保障。

在"Arduino Uno”(ARM驱动板)上我们采用C语言转汇编语言的方式编写程序，在“Raspberry 3B”(树莓派)上我们采用更加方便的Python语言进行编程，广泛使用开源库进行操作，降低了对硬件的控制难度。“Raspberry 3B”(树莓派)与服务器之间的数据传输全部依赖"SIM800H GPRS"(通信模块)，当硬件开机后"SIM800H GPRS"(通信模块)将自动与移动网络建立连接，之后通过程序控制使其与服务器建立TCP连接，之后所有的数据全部以msgpack数据格式在此链路上进行通信。

## 简介

可穿戴设备主要由心率传感器、GPS模块、麦克风等设备收集设备附近的信息，Arduino驱动板将传感器信息汇总发送至树莓派，通过树莓派上的软件，我们可以筛选出最有价值的信息，并将其进行初步的处理后打包上传至服务器进行在线分析反馈。可穿戴设备上的SIM800H通信芯片是设备与服务器建立良好数据链的跳板，也是家长与孩子之间保持良好通信的桥梁。

